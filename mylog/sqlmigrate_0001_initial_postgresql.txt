BEGIN;
--
-- Create model Curator
--
CREATE TABLE "Curator" ("name" varchar(35) NOT NULL, "last_name" varchar(35) NOT NULL, "patronymic" varchar(35) NOT NULL, "description" varchar(200) NOT NULL, "id" serial NOT NULL PRIMARY KEY);
--
-- Create model CuratorSkill
--
CREATE TABLE "Curator_skill" ("id" serial NOT NULL PRIMARY KEY, "curator_id" integer NOT NULL);
--
-- Create model Skill
--
CREATE TABLE "Skill" ("id" serial NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL);
--
-- Create model Student
--
CREATE TABLE "Student" ("name" varchar(35) NOT NULL, "last_name" varchar(35) NOT NULL, "patronymic" varchar(35) NOT NULL, "description" varchar(200) NOT NULL, "id" serial NOT NULL PRIMARY KEY);
--
-- Create model StudentSkill
--
CREATE TABLE "Student_skill" ("id" serial NOT NULL PRIMARY KEY, "skill_id" integer NOT NULL, "student_id" integer NOT NULL);
--
-- Create model Subject
--
CREATE TABLE "Subject" ("id" serial NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL);
--
-- Create model SuggestionTheme
--
CREATE TABLE "Suggestion_theme" ("id" serial NOT NULL PRIMARY KEY, "date_creation" timestamp with time zone NOT NULL, "curator_id" integer NOT NULL);
--
-- Create model SuggestionThemeComment
--
CREATE TABLE "Suggestion_theme_comment" ("id" serial NOT NULL PRIMARY KEY, "suggestion_theme_id" integer NOT NULL);
--
-- Create model SuggestionThemeProgress
--
CREATE TABLE "Suggestion_theme_progress" ("id" serial NOT NULL PRIMARY KEY, "title" varchar(75) NOT NULL, "description" varchar(150) NOT NULL, "date_update" timestamp with time zone NOT NULL);
--
-- Create model SuggestionThemeStatus
--
CREATE TABLE "Suggestion_theme_status" ("id" serial NOT NULL PRIMARY KEY, "name" varchar(50) NOT NULL);
--
-- Create model Theme
--
CREATE TABLE "Theme" ("id" serial NOT NULL PRIMARY KEY, "title" varchar(100) NOT NULL, "description" varchar(250) NOT NULL, "date_creation" timestamp with time zone NOT NULL, "date_acceptance" timestamp with time zone NOT NULL, "curator_id" integer NULL);
--
-- Create model ThemeSkill
--
CREATE TABLE "Theme_skill" ("id" serial NOT NULL PRIMARY KEY, "skill_id" integer NOT NULL, "theme_id" integer NOT NULL);
--
-- Create model Work
--
CREATE TABLE "Work" ("id" serial NOT NULL PRIMARY KEY, "date_start" timestamp with time zone NOT NULL, "date_finish" timestamp with time zone NOT NULL, "theme_id" integer NOT NULL);
--
-- Create model WorkStep
--
CREATE TABLE "Work_step" ("id" serial NOT NULL PRIMARY KEY, "title" varchar(100) NOT NULL, "description" varchar(250) NOT NULL, "date_start" timestamp with time zone NOT NULL, "date_finish" timestamp with time zone NOT NULL);
--
-- Create model WorkStepComment
--
CREATE TABLE "Work_step_comment" ("author_name" varchar(35) NOT NULL, "content" varchar(200) NOT NULL, "date_creation" timestamp with time zone NOT NULL, "id" serial NOT NULL PRIMARY KEY, "work_step_id" integer NOT NULL);
--
-- Create model WorkStepMaterial
--
CREATE TABLE "Work_step_material" ("id" serial NOT NULL PRIMARY KEY, "content" varchar(200) NOT NULL, "work_step_id" integer NOT NULL);
--
-- Create model WorkStepStatus
--
CREATE TABLE "Work_step_status" ("id" serial NOT NULL PRIMARY KEY, "name" varchar(50) NOT NULL);
--
-- Add field status to workstep
--
ALTER TABLE "Work_step" ADD COLUMN "status_id" integer NULL;
--
-- Add field work to workstep
--
ALTER TABLE "Work_step" ADD COLUMN "work_id" integer NOT NULL;
--
-- Add field required_skills to theme
--
--
-- Add field student to theme
--
ALTER TABLE "Theme" ADD COLUMN "student_id" integer NULL;
--
-- Add field subject to theme
--
ALTER TABLE "Theme" ADD COLUMN "subject_id" integer NULL;
--
-- Add field progress to suggestiontheme
--
ALTER TABLE "Suggestion_theme" ADD COLUMN "suggestion_theme_progress_id" integer NULL;
--
-- Add field status to suggestiontheme
--
ALTER TABLE "Suggestion_theme" ADD COLUMN "status_id" integer NULL;
--
-- Add field student to suggestiontheme
--
ALTER TABLE "Suggestion_theme" ADD COLUMN "student_id" integer NOT NULL;
--
-- Add field theme to suggestiontheme
--
ALTER TABLE "Suggestion_theme" ADD COLUMN "theme_id" integer NOT NULL;
--
-- Add field skills to student
--
--
-- Add field skill to curatorskill
--
ALTER TABLE "Curator_skill" ADD COLUMN "skill_id" integer NOT NULL;
--
-- Add field skills to curator
--
ALTER TABLE "Curator_skill" ADD CONSTRAINT "Curator_skill_curator_id_ec5f0bf3_fk_Curator_id" FOREIGN KEY ("curator_id") REFERENCES "Curator" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Curator_skill_curator_id_ec5f0bf3" ON "Curator_skill" ("curator_id");
ALTER TABLE "Student_skill" ADD CONSTRAINT "Student_skill_skill_id_a0f40eeb_fk_Skill_id" FOREIGN KEY ("skill_id") REFERENCES "Skill" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Student_skill" ADD CONSTRAINT "Student_skill_student_id_c18e1b3b_fk_Student_id" FOREIGN KEY ("student_id") REFERENCES "Student" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Student_skill_skill_id_a0f40eeb" ON "Student_skill" ("skill_id");
CREATE INDEX "Student_skill_student_id_c18e1b3b" ON "Student_skill" ("student_id");
ALTER TABLE "Suggestion_theme" ADD CONSTRAINT "Suggestion_theme_curator_id_0a36d856_fk_Curator_id" FOREIGN KEY ("curator_id") REFERENCES "Curator" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Suggestion_theme_curator_id_0a36d856" ON "Suggestion_theme" ("curator_id");
ALTER TABLE "Suggestion_theme_comment" ADD CONSTRAINT "Suggestion_theme_com_suggestion_theme_id_5cb70fc7_fk_Suggestio" FOREIGN KEY ("suggestion_theme_id") REFERENCES "Suggestion_theme" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Suggestion_theme_comment_suggestion_theme_id_5cb70fc7" ON "Suggestion_theme_comment" ("suggestion_theme_id");
ALTER TABLE "Theme" ADD CONSTRAINT "Theme_curator_id_b807b49a_fk_Curator_id" FOREIGN KEY ("curator_id") REFERENCES "Curator" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Theme_curator_id_b807b49a" ON "Theme" ("curator_id");
ALTER TABLE "Theme_skill" ADD CONSTRAINT "Theme_skill_skill_id_3cd55e06_fk_Skill_id" FOREIGN KEY ("skill_id") REFERENCES "Skill" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Theme_skill" ADD CONSTRAINT "Theme_skill_theme_id_d2e74236_fk_Theme_id" FOREIGN KEY ("theme_id") REFERENCES "Theme" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Theme_skill_skill_id_3cd55e06" ON "Theme_skill" ("skill_id");
CREATE INDEX "Theme_skill_theme_id_d2e74236" ON "Theme_skill" ("theme_id");
ALTER TABLE "Work" ADD CONSTRAINT "Work_theme_id_eaade071_fk_Theme_id" FOREIGN KEY ("theme_id") REFERENCES "Theme" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Work_theme_id_eaade071" ON "Work" ("theme_id");
ALTER TABLE "Work_step_comment" ADD CONSTRAINT "Work_step_comment_work_step_id_ecc2d35e_fk_Work_step_id" FOREIGN KEY ("work_step_id") REFERENCES "Work_step" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Work_step_comment_work_step_id_ecc2d35e" ON "Work_step_comment" ("work_step_id");
ALTER TABLE "Work_step_material" ADD CONSTRAINT "Work_step_material_work_step_id_e55bc701_fk_Work_step_id" FOREIGN KEY ("work_step_id") REFERENCES "Work_step" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Work_step_material_work_step_id_e55bc701" ON "Work_step_material" ("work_step_id");
CREATE INDEX "Work_step_status_id_e8a0c444" ON "Work_step" ("status_id");
ALTER TABLE "Work_step" ADD CONSTRAINT "Work_step_status_id_e8a0c444_fk_Work_step_status_id" FOREIGN KEY ("status_id") REFERENCES "Work_step_status" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Work_step_work_id_fd227757" ON "Work_step" ("work_id");
ALTER TABLE "Work_step" ADD CONSTRAINT "Work_step_work_id_fd227757_fk_Work_id" FOREIGN KEY ("work_id") REFERENCES "Work" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Theme_student_id_56dd59b2" ON "Theme" ("student_id");
ALTER TABLE "Theme" ADD CONSTRAINT "Theme_student_id_56dd59b2_fk_Student_id" FOREIGN KEY ("student_id") REFERENCES "Student" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Theme_subject_id_24550eb8" ON "Theme" ("subject_id");
ALTER TABLE "Theme" ADD CONSTRAINT "Theme_subject_id_24550eb8_fk_Subject_id" FOREIGN KEY ("subject_id") REFERENCES "Subject" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Suggestion_theme_suggestion_theme_progress_id_dfcdc56e" ON "Suggestion_theme" ("suggestion_theme_progress_id");
ALTER TABLE "Suggestion_theme" ADD CONSTRAINT "Suggestion_theme_suggestion_theme_pro_dfcdc56e_fk_Suggestio" FOREIGN KEY ("suggestion_theme_progress_id") REFERENCES "Suggestion_theme_progress" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Suggestion_theme_status_id_600846c8" ON "Suggestion_theme" ("status_id");
ALTER TABLE "Suggestion_theme" ADD CONSTRAINT "Suggestion_theme_status_id_600846c8_fk_Suggestio" FOREIGN KEY ("status_id") REFERENCES "Suggestion_theme_status" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Suggestion_theme_student_id_27921146" ON "Suggestion_theme" ("student_id");
ALTER TABLE "Suggestion_theme" ADD CONSTRAINT "Suggestion_theme_student_id_27921146_fk_Student_id" FOREIGN KEY ("student_id") REFERENCES "Student" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Suggestion_theme_theme_id_a5cdf114" ON "Suggestion_theme" ("theme_id");
ALTER TABLE "Suggestion_theme" ADD CONSTRAINT "Suggestion_theme_theme_id_a5cdf114_fk_Theme_id" FOREIGN KEY ("theme_id") REFERENCES "Theme" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Curator_skill_skill_id_c5eb49ac" ON "Curator_skill" ("skill_id");
ALTER TABLE "Curator_skill" ADD CONSTRAINT "Curator_skill_skill_id_c5eb49ac_fk_Skill_id" FOREIGN KEY ("skill_id") REFERENCES "Skill" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;
